
<!DOCTYPE html>
<html>
    <head>
        <title>quiz</title>

        <script>
            var count = 0;
            function E(name) {
                return document.getElementById(name);
            }

            function run() {
                console.log('run');
                fetch('/q')
                .then(res=>res.json())    
                .then(json=>{
                    document.getElementById('n').innerText=json;
                    count = json
                    return fetch('/q/1')
                })
                .then(res=>res.json())
                .then(json=>{
                    document.getElementById('x').innerHTML=
                        JSON.stringify(json);
                    document.getElementById('question').innerHTML=
                        JSON.stringify(json.q.trim('"'));
                    
                    if (json.a.length===1) {
                        for (i in json.c) {
                            const e = document.createElement('INPUT')
                            e.setAttribute('type', 'radio');
                            e.setAttribute('value', i);
                            e.setAttribute('name', i);
                            e.innerHTML=json.c[i].trim();
                            const div = document.createElement('DIV')
                            div.appendChild(e);
                            E('choices_form').appendChild(div);

                        }
                    }
                })

            }
        </script>
    </head>
    
    <body onload='run()'>
        <div id='n'></div>
        <div id='x'></div>
        <div id='question'></div>
        <div id='choices'>
            <form id='choices_form'>

            </form>
        </div>



    </body>
</html>